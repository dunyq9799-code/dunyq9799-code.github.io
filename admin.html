<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DUNYA PRINT | Admin Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Sarabun', sans-serif;
      background-color: #FDFBF8;
      color: #4B4B4B;
    }
  </style>
</head>
<body class="min-h-screen">

  <!-- üîê Login Section -->
  <section id="login-section" class="flex flex-col items-center justify-center h-screen text-center">
    <h1 class="text-3xl font-semibold text-amber-800 mb-4">DUNYA PRINT</h1>
    <p class="text-gray-500 mb-6">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô</p>
    <input id="password" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" class="border border-amber-200 rounded-lg px-4 py-2 mb-4 text-center">
    <button id="login-btn" class="bg-amber-500 text-white px-6 py-2 rounded-lg hover:bg-amber-600 transition">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    <p id="login-error" class="text-red-500 mt-4 hidden">‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>
  </section>

  <!-- üß≠ Admin Panel -->
  <section id="admin-section" class="hidden max-w-5xl mx-auto py-12 px-6">
    <h2 class="text-2xl font-medium text-amber-700 mb-8 text-center">Admin Dashboard</h2>

    <!-- Tabs -->
    <div class="flex space-x-4 justify-center mb-8">
      <button onclick="scrollToSection('product-section')" class="bg-amber-100 text-amber-800 px-6 py-2 rounded-lg hover:bg-amber-200 transition">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
      <button onclick="scrollToSection('package-section')" class="bg-amber-100 text-amber-800 px-6 py-2 rounded-lg hover:bg-amber-200 transition">‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à</button>
    </div>

    <!-- Product Form -->
    <div id="product-section" class="bg-white border border-amber-100 rounded-xl p-6 mb-10 shadow-sm">
      <h3 class="text-xl font-semibold text-amber-700 mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h3>
      <form id="product-form" class="grid gap-4 md:grid-cols-2">
        <input id="product-name" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" class="border rounded-lg px-4 py-2">
        <input id="product-price" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)" class="border rounded-lg px-4 py-2">
        <input id="product-discount" type="number" placeholder="‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (%)" class="border rounded-lg px-4 py-2">
        <input id="product-image" type="url" placeholder="URL ‡∏£‡∏π‡∏õ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" class="border rounded-lg px-4 py-2 md:col-span-2">
        <button type="button" id="add-product" class="bg-amber-500 text-white px-6 py-2 rounded-lg hover:bg-amber-600 transition md:col-span-2">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
      </form>
    </div>

    <!-- Package Form -->
    <div id="package-section" class="bg-white border border-amber-100 rounded-xl p-6 mb-10 shadow-sm">
      <h3 class="text-xl font-semibold text-amber-700 mb-4">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏™‡∏∏‡∏î‡∏Ñ‡∏∏‡πâ‡∏°</h3>
      <form id="package-form" class="grid gap-4 md:grid-cols-2">
        <input id="package-name" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à" class="border rounded-lg px-4 py-2">
        <input id="package-price" type="number" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)" class="border rounded-lg px-4 py-2">
        <input id="package-discount" type="number" placeholder="‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î (%)" class="border rounded-lg px-4 py-2">
        <input id="package-end" type="date" class="border rounded-lg px-4 py-2">
        <input id="package-image" type="url" placeholder="URL ‡∏£‡∏π‡∏õ‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à" class="border rounded-lg px-4 py-2 md:col-span-2">
        <button type="button" id="add-package" class="bg-amber-500 text-white px-6 py-2 rounded-lg hover:bg-amber-600 transition md:col-span-2">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à</button>
      </form>
    </div>

    <!-- üìä Dashboard -->
    <div class="bg-amber-50 border border-amber-100 rounded-xl p-8 text-center shadow-inner">
      <h3 class="text-xl font-semibold text-amber-700 mb-6">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <div><p class="text-3xl font-bold text-amber-600" id="stat-products">0</p><p class="text-gray-500">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p></div>
        <div><p class="text-3xl font-bold text-amber-600" id="stat-packages">0</p><p class="text-gray-500">‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p></div>
        <div><p class="text-3xl font-bold text-amber-600" id="stat-discounted">0</p><p class="text-gray-500">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏î‡∏£‡∏≤‡∏Ñ‡∏≤</p></div>
        <div><p class="text-3xl font-bold text-amber-600" id="stat-expired">0</p><p class="text-gray-500">‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡∏´‡∏°‡∏î‡πÇ‡∏õ‡∏£</p></div>
      </div>
    </div>
  </section>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    // üîß Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyAhky9wrqgm7r6BAJqYq4zo92aiV9_2Gyw",
      authDomain: "dunyaprint-shop.firebaseapp.com",
      databaseURL: "https://dunyaprint-shop-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "dunyaprint-shop",
      storageBucket: "dunyaprint-shop.firebasestorage.app",
      messagingSenderId: "78107878309",
      appId: "1:78107878309:web:a57a377b28ff884e2e3e4c",
      measurementId: "G-P4BHPCHK87"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ‚úÖ Login
    document.getElementById("login-btn").addEventListener("click", function () {
      const pass = document.getElementById("password").value.trim();
      if (pass === "dunya2025") {
        document.getElementById("login-section").classList.add("hidden");
        document.getElementById("admin-section").classList.remove("hidden");
        loadStats();
      } else {
        document.getElementById("login-error").classList.remove("hidden");
      }
    });

    // üì¶ Add Product
    document.getElementById("add-product").addEventListener("click", function () {
      const name = document.getElementById("product-name").value;
      const price = parseFloat(document.getElementById("product-price").value);
      const discount = parseInt(document.getElementById("product-discount").value) || 0;
      const image = document.getElementById("product-image").value;

      if (!name || !price) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤");

      db.ref("products").push({ name, price, discount, image });
      alert("‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
      document.getElementById("product-form").reset();
      loadStats();
    });

    // üéÅ Add Package
    document.getElementById("add-package").addEventListener("click", function () {
      const name = document.getElementById("package-name").value;
      const price = parseFloat(document.getElementById("package-price").value);
      const discount = parseInt(document.getElementById("package-discount").value) || 0;
      const endDate = document.getElementById("package-end").value;
      const image = document.getElementById("package-image").value;

      if (!name || !price) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤");

      db.ref("packages").push({ name, price, discount, endDate, image });
      alert("‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏û‡πá‡∏Å‡πÄ‡∏Å‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!");
      document.getElementById("package-form").reset();
      loadStats();
    });

    // üìä Load Dashboard
    function loadStats() {
      db.ref("products").once("value", snap => {
        const data = snap.val() || {};
        const items = Object.values(data);
        document.getElementById("stat-products").textContent = items.length;
        document.getElementById("stat-discounted").textContent = items.filter(p => p.discount > 0).length;
      });

      db.ref("packages").once("value", snap => {
        const data = snap.val() || {};
        const items = Object.values(data);
        const expired = items.filter(p => p.endDate && new Date(p.endDate) < new Date()).length;
        document.getElementById("stat-packages").textContent = items.length;
        document.getElementById("stat-expired").textContent = expired;
      });
    }

    function scrollToSection(id) {
      document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
    }
  </script>
</body>
</html>
